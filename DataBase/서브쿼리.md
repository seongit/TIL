## 서브 쿼리

- 서브 쿼리는 부속(하위) 질의 라고 한다.
- 서브 쿼리를 포함하고 있는 쿼리문를 메인 쿼리
- 포함된 또 하나의 쿼리를 서브 쿼리라고 한다.
- 서브 쿼리를 메인 쿼리 실행되기 이전에 한 번만 실행된다.
- 단일 행 서브 쿼리와 다중 행 서브 쿼리를 구분하는 기준은?

        서브 쿼리가 반환하는 행의 수 

### 서브쿼리 활용 시 유의사항

- 서브 쿼리는 비교 연산자의 오른쪽에 기술해야 하고 반드시 소괄호() 안에 사용한다.
- 이때 서브 쿼리는 ;를 사용하지 않음
- 서브 쿼리가 반환하는 행의 수는 메인 쿼리가 기대하는 행의 수와 일치하여야 한다.
- 서브 쿼리는 ORDER BY절을 사용하지 않는다.
- 정렬 X
        

### 단일 행 서브 쿼리
- 단일 행 서브 쿼리는 서브 쿼리 결과가 하나의 행만 반환된다.
- 단일행 비교 연산자인 =, <>, >, ≥,<.≤ 를 사용해야 한다.

### 다중 행 서브 쿼리
- 다중 행 서브 쿼리는 서브 쿼리에서 반환되는 결과가 여러 행이 반환된다.
- 다중 행 서브 쿼리는 반드시 다중 행 연산자와 함께 사용해야 한다.
    - 비교 연산자 사용 불가
       
- **다중 행 연산자**
    - IN : 메인 쿼리의 비교 조건이 서브 쿼리의 결과 중에 **하나라도 일치하면 참**이다.
    - ANY,SOME : 메인 쿼리의 비교 조건이 서브 쿼리의 검색 결과와 **하나 이상 일치하면 참**이다
    - ALL : 메인 쿼리의 비교 조건이 서브 쿼리의 검색 결과와 **모든 값이 일치하면 참**이다.
    - EXISTS : 메인 쿼리의 비교 조건이 서브 쿼리의 검색 결과 중에서 만족하는 값이 **하나라도 존재하면 참**이다.


                👉 서브 쿼리의 결과가 참인지 아닌지가 중요하지 않고, 결과가 있기만 하면 참이다.

**IN보다는 EXISTS를 사용하는 것을 권장한다.
